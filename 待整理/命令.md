# 开发环境

## 一、换源

1. [校园网联合镜像站](https://mirrors.cernet.edu.cn/about)

2. [RubyMetric/chsrc: chsrc 全平台通用换源工具与框架](https://github.com/RubyMetric/chsrc)
   > curl -L https://gitee.com/RubyMetric/chsrc/releases/download/pre/chsrc-x64-linux -o chsrc; chmod +x ./chsrc

## 二、vim 配置

2.1.1. [wklken/vim-for-server](https://github.com/wklken/vim-for-server)

```bash
cp ~/.vimrc ~/.vimrc_bak
curl https://ghp.ci/https://raw.githubusercontent.com/wklken/vim-for-server/master/vimrc > ~/.vimrc
```

## 三、zsh 配置

`$HOME/.zshrc`

```bash
# Created by clover whth the help of Linux lovers all over the world for zhs 5.8.1

# 彩色输出
if [ -x /usr/bin/dircolors ]; then
    test -r ~/.dircolors && eval "$(dircolors -b ~/.dircolors)" || eval "$(dircolors -b)"
    alias ls='ls --color=auto'
    alias grep='grep --color=auto'
    alias fgrep='fgrep --color=auto'
    alias egrep='egrep --color=auto'
fi

# 自动补全
autoload -Uz compinit
compinit
zstyle ':completion:*' menu yes=long select

# 禁用多行提示消失
export COMPLETION_WAITING_DOTS="false"

# 历史记录
HISTFILE=~/.histfile
HISTSIZE=1000
SAVEHIST=1000
setopt appendhistory

# 缩写
alias la='ls -A'
alias ll='ls -lh'
alias ping="ping -c 4 "
alias cls='clear'
alias cp="cp -i"
alias mv="mv -i"

# 插件
export TERM=xterm-256color
source $HOME/.zsh/zsh-autosuggestions/zsh-autosuggestions.zsh

# 命令提示符
autoload -U colors && colors
PROMPT="%(?::%B[%?] %b)%B%{$fg[green]%}%#%{$reset_color%}%b %B%{$fg[blue]%}%.%{$reset_color%}%b "

# 使用 Starship
eval "$(starship init zsh)"
```

解释说明

- 颜色输出：就是启用`ls`、`grep`和`ip`命令的彩色输出选项。
- 自动补全：启用 zsh 的自动补全功能，输入一部分命令或文件名后，按`Tab`，会弹出一个菜单，按上下方向键移动光标，即可补全命令。
- 历史记录：在用户的主文件夹下创建一个`.histfile`文件，用于存放历史记录，可记录 1000 条。
- 缩写：语法就是 `alias 别名="对应的命令"`
  - `cls` 是模仿 DOS 中的清屏指令；
  - `ping` 则模仿了 WIndows 中的设置，默认 ping 4 次；
  - `cp、mv、rm` 则是启用了交互模式，删除文件前需要确认、操作会覆盖文件时也需要先确认，防止误操作造成数据损失；
  - `la` 用于显示所有文件（包括隐藏文件），`ll` 则是列出文件的详细信息，并用 MB、GB 等单位显示文件大小，更加直观。
- 插件：
  - `export TERM=xterm-256color` 可以解决部分终端程序在 tmux 下无法显示 256 色的问题。
  - 该节第 2 行是调用自动提示插件，当你输入命令时，系统会根据历史记录显示提示，按 `→` 即可补全命令。需要先安装 `zsh-autosuggestions` 软件包。
  - 该节第 3 行是调用错误提示插件，如果你输入的命令系统无法找到，则会显示一条提示，告诉你这个命令可能在哪个软件包里面。
- 命令提示符：
  - 以普通用户身份运行时，显示的是 `% 当前目录名` ，比如在 `/usr/share/` 中，会显示 `% share` ，`%` 用绿色显示，目录名用蓝色显示。
  - 以 root 身份运行时，`%`会变成 `#`。
  - 如果上一条命令的返回代码不是 0，则会在提示符前面显示返回代码。比如上一条命令返回了错误代码 2，则命令提示符会变成 `[2] % ~` 。

插件安装：

1. [`zsh-autosuggestions`](https://github.com/zsh-users/zsh-autosuggestions/blob/master/INSTALL.md)

```bash
git clone https://ghp.ci/https://github.com/zsh-users/zsh-autosuggestions $HOME/.zsh/zsh-autosuggestions
```

使用 [`Starship`](https://starship.rs/zh-CN/guide/)：

安装：`curl -sS https://starship.rs/install.sh | sh`

## 安装[`Installing Miniconda`](https://docs.anaconda.com/miniconda/#miniconda-latest-installer-links/)

```bash
mkdir -p ~/miniconda3
wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda3/miniconda.sh
bash ~/miniconda3/miniconda.sh -b -u -p ~/miniconda3
rm ~/miniconda3/miniconda.sh

~/miniconda3/bin/conda init bash
~/miniconda3/bin/conda init zsh
```

## Linux 配置语言环境

1. 首先需要安装`locales`这个软件包
2. 使用`dpkg-reconfigure locales`命令配置语言环境

## [cockpit](https://cockpit-project.org/) [cockpit wiki](https://wiki.archlinux.org/title/Cockpit)

```bash
# 启用 cockpit
systemctl enable --now cockpit.socket
systemctl start cockpit.socket
```

1. Cockpit 开启 root 用户登录权限

```bash
vim /etc/cockpit/disallowed-users
# List of users which are not allowed to login to Cockpit
# root
```
